#!/bin/bash

echo "ğŸš¨ ============================================"
echo "ğŸš¨ SERVIDOR PRECISA SER REINICIADO!"
echo "ğŸš¨ ============================================"
echo ""
echo "âŒ PROBLEMA:"
echo "   O servidor estÃ¡ rodando o CÃ“DIGO ANTIGO"
echo "   Que olha o campo 'listed' (desatualizado)"
echo ""
echo "âœ… SOLUÃ‡ÃƒO:"
echo "   Reiniciar para carregar o cÃ³digo NOVO"
echo "   Que faz JOIN com tabela 'offers'"
echo ""
echo "ğŸ¯ AÃ‡ÃƒO:"
echo "   1. VÃ¡ ao terminal onde 'npm start' estÃ¡ rodando"
echo "   2. Pressione Ctrl + C"
echo "   3. Aguarde 2 segundos"
echo "   4. Digite: npm start"
echo "   5. Aguarde aparecer: 'Server running on port 3000'"
echo ""
echo "ğŸ“‹ VERIFICAÃ‡ÃƒO:"
echo "   ApÃ³s reiniciar, execute:"
echo "   curl http://localhost:3000/api/ordinals?listed=true"
echo ""
echo "   âœ… DEVE RETORNAR:"
echo "   {\"inscriptions\":[]}"
echo "   (vazio, porque nÃ£o tem ofertas)"
echo ""
echo "ğŸ§¹ BANCO LIMPO:"
sqlite3 server/db/ordinals.db "SELECT COUNT(*) as offers FROM offers;"
echo "   Ofertas: ^^ (deve ser 0)"
echo ""
sqlite3 server/db/ordinals.db "SELECT inscription_number, listed FROM inscriptions;"
echo "   Inscription: ^^ (listed deve ser 0)"
echo ""
echo "ğŸš€ AGORA REINICIE O SERVIDOR!"
echo "ğŸš¨ ============================================"




